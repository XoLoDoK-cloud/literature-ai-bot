from datetime import datetime
from services.daily_quotes import daily_quotes

async def show_author_profile(callback: CallbackQuery, author_key: str):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ—Ä–∞"""
    
    author_profiles = {
        "pushkin": {
            "name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω",
            "emoji": "üñãÔ∏è",
            "birth": "06.06.1799 - 10.02.1837",
            "title": "–í–µ–ª–∏–∫–∏–π —Ä—É—Å—Å–∫–∏–π –ø–æ—ç—Ç",
            "achievements": [
                "–°–æ–∑–¥–∞—Ç–µ–ª—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞",
                "–ê–≤—Ç–æ—Ä 800+ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–π",
                "–†–æ–¥–æ–Ω–∞—á–∞–ª—å–Ω–∏–∫ —Ä—É—Å—Å–∫–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã"
            ],
            "fun_fact": "–ó–Ω–∞–≤—à–∏–π 16 —è–∑—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π, –ª–∞—Ç—ã–Ω—å –∏ –¥—Ä–µ–≤–Ω–µ–≥—Ä–µ—á–µ—Å–∫–∏–π"
        },
        "dostoevsky": {
            "name": "–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π",
            "emoji": "üìö",
            "birth": "11.11.1821 - 09.02.1881",
            "title": "–ü–∏—Å–∞—Ç–µ–ª—å-—Ñ–∏–ª–æ—Å–æ—Ñ",
            "achievements": [
                "–ú–∞—Å—Ç–µ—Ä –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞",
                "–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å XX –≤–µ–∫–∞ –≤ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ",
                "–ê–≤—Ç–æ—Ä 5 –≤–µ–ª–∏–∫–∏—Ö —Ä–æ–º–∞–Ω–æ–≤"
            ],
            "fun_fact": "–ü–µ—Ä–µ–∂–∏–ª –∏–Ω—Å—Ü–µ–Ω–∏—Ä–æ–≤–∫—É –∫–∞–∑–Ω–∏ –∏ 4 –≥–æ–¥–∞ –∫–∞—Ç–æ—Ä–≥–∏"
        },
        "gigachad": {
            "name": "üí™ –ì–ò–ì–ê–ß–ê–î",
            "emoji": "üí™",
            "birth": "–õ–µ–≥–µ–Ω–¥–∞ - –í–µ—á–Ω–æ—Å—Ç—å",
            "title": "–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç",
            "achievements": [
                "–ü—Ä–æ–∫–∞—á–∞–ª —Å–æ–∑–Ω–∞–Ω–∏–µ 1000+ —á–∏—Ç–∞—Ç–µ–ª–µ–π",
                "–°–≤—è–∑–∞–ª –∫–ª–∞—Å—Å–∏–∫—É —Å —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ–º",
                "–°–æ–∑–¥–∞—Ç–µ–ª—å —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ –ø—Ä–æ–∫–∞—á–∫–∏"
            ],
            "fun_fact": "–ß–∏—Ç–∞–µ—Ç –ø–æ 2 –∫–Ω–∏–≥–∏ –≤ –¥–µ–Ω—å –∏ –¥–µ–ª–∞–µ—Ç 100 –æ—Ç–∂–∏–º–∞–Ω–∏–π"
        }
    }
    
    profile = author_profiles.get(author_key, author_profiles["pushkin"])
    quote = daily_quotes.get_daily_quote(author_key)
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
    profile_text = f"""
{profile['emoji']} <b>{profile['name'].upper()}</b>
<code>{'‚ïê' * 35}</code>

üìÖ <b>–ì–æ–¥—ã –∂–∏–∑–Ω–∏:</b> {profile['birth']}
üé≠ <b>–¢–∏—Ç—É–ª:</b> {profile['title']}

üìö <b>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</b>
"""
    
    for i, achievement in enumerate(profile['achievements'], 1):
        profile_text += f"{i}. {achievement}\n"
    
    profile_text += f"""
üí° <b>–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:</b>
{profile['fun_fact']}

<code>{'‚ïê' * 35}</code>

üìñ <b>–¶–ò–¢–ê–¢–ê –î–ù–Ø:</b>
<blockquote>"{quote['text']}"</blockquote>
<i>‚Äî {quote['work']}</i>

<code>{'‚ïê' * 35}</code>

üëá <b>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä—É:</b>
"""
    
    await callback.message.answer(
        profile_text,
        parse_mode=ParseMode.HTML,
        reply_markup=get_chat_keyboard(callback.from_user.id)
    )
