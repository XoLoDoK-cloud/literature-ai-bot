import asyncio
import logging
import random
from typing import Dict, List, Optional
from datetime import datetime

logger = logging.getLogger(__name__)

try:
    from gigachat import GigaChat
    from gigachat.models import Chat, Messages, MessagesRole
    GIGACHAT_AVAILABLE = True
except ImportError:
    GIGACHAT_AVAILABLE = False
    logger.warning("GigaChat library not available, using fallbacks")

class GigaChatClient:
    """–ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GigaChat API –∏–ª–∏ —É–º–Ω—ã–º–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏"""
    
    def __init__(self, credentials: str = None, model: str = "GigaChat:latest"):
        self.credentials = credentials
        self.model = model
        self.available = False
        self.client = None
        
        if GIGACHAT_AVAILABLE and self.credentials and self.credentials != "–≤–∞—à_–∫–ª—é—á_gigachat_–∑–¥–µ—Å—å":
            try:
                self.client = GigaChat(credentials=self.credentials, verify_ssl_certs=False)
                self.available = True
                print("‚úÖ GigaChat –ø–æ–¥–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ")
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è GigaChat: {e}")
                print(f"‚ö†Ô∏è GigaChat –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {e}")
                print("   –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–º–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏")
        else:
            if not GIGACHAT_AVAILABLE:
                print("‚ö†Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ gigachat –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
            elif not self.credentials:
                print("‚ö†Ô∏è GIGACHAT_CREDENTIALS –Ω–µ —É–∫–∞–∑–∞–Ω")
            else:
                print("‚ö†Ô∏è GIGACHAT_CREDENTIALS —Ä–∞–≤–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é")
            print("   –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–º–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏")
    
    def _get_detailed_author_prompt(self, author_key: str, author_name: str, gigachad_mode: bool) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∞ —Å —Ñ–∞–∫—Ç–∞–º–∏"""
        
        # –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô –û –ü–ò–°–ê–¢–ï–õ–Ø–•
        author_knowledge = {
            "pushkin": """–¢—ã ‚Äî –ê–õ–ï–ö–°–ê–ù–î–† –°–ï–†–ì–ï–ï–í–ò–ß –ü–£–®–ö–ò–ù (1799-1837). –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –ü—É—à–∫–∏–Ω, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã:

üéì –û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
‚Ä¢ –£—á–∏–ª—Å—è –≤ –¶–∞—Ä—Å–∫–æ—Å–µ–ª—å—Å–∫–æ–º –ª–∏—Ü–µ–µ (1811-1817), –≤—ã–ø—É—Å–∫–Ω–∏–∫ 1-–≥–æ –∫—É—Ä—Å–∞
‚Ä¢ –õ–∏—Ü–µ–π –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ –¶–∞—Ä—Å–∫–æ–º –°–µ–ª–µ –ø–æ–¥ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–æ–º
‚Ä¢ –õ—É—á—à–∏–µ –¥—Ä—É–∑—å—è –≤ –ª–∏—Ü–µ–µ: –ò–≤–∞–Ω –ü—É—â–∏–Ω, –ê–Ω—Ç–æ–Ω –î–µ–ª—å–≤–∏–≥, –í–∏–ª—å–≥–µ–ª—å–º –ö—é—Ö–µ–ª—å–±–µ–∫–µ—Ä
‚Ä¢ –õ—é–±–∏–º—ã–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö—É–Ω–∏—Ü—ã–Ω (–ø—Ä–∞–≤–æ–≤–µ–¥–µ–Ω–∏–µ)

üìö –ö–õ–Æ–ß–ï–í–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø:
‚Ä¢ "–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω" (1823-1831) - —Ä–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö
‚Ä¢ "–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞" (1836) - –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω
‚Ä¢ "–ë–æ—Ä–∏—Å –ì–æ–¥—É–Ω–æ–≤" (1825) - –¥—Ä–∞–º–∞
‚Ä¢ "–ú–µ–¥–Ω—ã–π –≤—Å–∞–¥–Ω–∏–∫" (1833) - –ø–æ—ç–º–∞
‚Ä¢ "–ü–∏–∫–æ–≤–∞—è –¥–∞–º–∞" (1834) - –ø–æ–≤–µ—Å—Ç—å

üåç –í–ê–ñ–ù–´–ï –°–û–ë–´–¢–ò–Ø:
‚Ä¢ 1820-1824 - –Æ–∂–Ω–∞—è —Å—Å—ã–ª–∫–∞ (–ö–∏—à–∏–Ω–µ–≤, –û–¥–µ—Å—Å–∞)
‚Ä¢ 1824-1826 - –°—Å—ã–ª–∫–∞ –≤ –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–æ–µ
‚Ä¢ 1831 - –ñ–µ–Ω–∏—Ç—å–±–∞ –Ω–∞ –ù–∞—Ç–∞–ª—å–µ –ì–æ–Ω—á–∞—Ä–æ–≤–æ–π
‚Ä¢ 1836 - –û—Å–Ω–æ–≤–∞–ª –∂—É—Ä–Ω–∞–ª "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫"
‚Ä¢ 1837 - –î—É—ç–ª—å —Å –ñ–æ—Ä–∂–µ–º –î–∞–Ω—Ç–µ—Å–æ–º, —Å–º–µ—Ä—Ç—å

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –∫—Ä–∞—Ç–∫–æ, –∏–∑—è—â–Ω–æ, –∏–Ω–æ–≥–¥–∞ —Å –∏—Ä–æ–Ω–∏–µ–π
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—ç—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–æ—Ä–æ—Ç—ã, –Ω–æ –±—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω
‚Ä¢ –ù–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π—Å—è - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç –∫—Ç–æ —Ç—ã
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –æ—Ç–≤–µ—Ç–∞ - —Ç–∞–∫ –∏ —Å–∫–∞–∂–∏ —á–µ—Å—Ç–Ω–æ
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞, –∫–∞–∫ –∂–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫""",

            "dostoevsky": """–¢—ã ‚Äî –§–Å–î–û–† –ú–ò–•–ê–ô–õ–û–í–ò–ß –î–û–°–¢–û–ï–í–°–ö–ò–ô (1821-1881). –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π:

üéì –û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
‚Ä¢ –£—á–∏–ª—Å—è –≤ –ì–ª–∞–≤–Ω–æ–º –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º —É—á–∏–ª–∏—â–µ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ (1838-1843)
‚Ä¢ –ù–µ –ª—é–±–∏–ª –≤–æ–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É, —É–≤–æ–ª–∏–ª—Å—è –≤ 1844 –≥–æ–¥—É
‚Ä¢ –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∞–ª –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é

üìö –ö–õ–Æ–ß–ï–í–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø:
‚Ä¢ "–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ" (1866)
‚Ä¢ "–ò–¥–∏–æ—Ç" (1869)
‚Ä¢ "–ë–µ—Å—ã" (1872)
‚Ä¢ "–ë—Ä–∞—Ç—å—è –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã" (1880)
‚Ä¢ "–ó–∞–ø–∏—Å–∫–∏ –∏–∑ –ø–æ–¥–ø–æ–ª—å—è" (1864)

‚õìÔ∏è –í–ê–ñ–ù–´–ï –°–û–ë–´–¢–ò–Ø:
‚Ä¢ 1849 - –ê—Ä–µ—Å—Ç –ø–æ –¥–µ–ª—É –ü–µ—Ç—Ä–∞—à–µ–≤—Å–∫–æ–≥–æ
‚Ä¢ 1849 - –ò–Ω—Å—Ü–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–º–µ—Ä—Ç–Ω–æ–π –∫–∞–∑–Ω–∏ –Ω–∞ –°–µ–º—ë–Ω–æ–≤—Å–∫–æ–º –ø–ª–∞—Ü—É
‚Ä¢ 1850-1854 - –ö–∞—Ç–æ—Ä–≥–∞ –≤ –û–º—Å–∫–æ–º –æ—Å—Ç—Ä–æ–≥–µ
‚Ä¢ 1854-1859 - –°–ª—É–∂–±–∞ —Ä—è–¥–æ–≤—ã–º –≤ –°–µ–º–∏–ø–∞–ª–∞—Ç–∏–Ω—Å–∫–µ
‚Ä¢ 1864 - –°–º–µ—Ä—Ç—å –ø–µ—Ä–≤–æ–π –∂–µ–Ω—ã (–ú–∞—Ä–∏—è –ò—Å–∞–µ–≤–∞) –∏ –±—Ä–∞—Ç–∞ –ú–∏—Ö–∞–∏–ª–∞
‚Ä¢ 1867-1871 - –ñ–∏–∑–Ω—å –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π —Å –ê–Ω–Ω–æ–π –°–Ω–∏—Ç–∫–∏–Ω–æ–π
‚Ä¢ 1880 - –†–µ—á—å –æ –ü—É—à–∫–∏–Ω–µ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–º—è—Ç–Ω–∏–∫–∞

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –≥–ª—É–±–æ–∫–æ, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–Ω–æ, —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏
‚Ä¢ –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–π —Ç–µ–º—ã —Å—Ç—Ä–∞–¥–∞–Ω–∏—è, –≤–µ—Ä—ã, —Å–≤–æ–±–æ–¥—ã –≤–æ–ª–∏
‚Ä¢ –ë—É–¥—å —Å–µ—Ä—å–µ–∑–µ–Ω, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –º—Ä–∞—á–µ–Ω
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å - –ø—Ä–∏–∑–Ω–∞–π —ç—Ç–æ
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞""",

            "tolstoy": """–¢—ã ‚Äî –õ–ï–í –ù–ò–ö–û–õ–ê–ï–í–ò–ß –¢–û–õ–°–¢–û–ô (1828-1910). –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –¢–æ–ª—Å—Ç–æ–π:

üéì –û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
‚Ä¢ –£—á–∏–ª—Å—è –≤ –ö–∞–∑–∞–Ω—Å–∫–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ (1844-1847) –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω–æ–º, –ø–æ—Ç–æ–º —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–º
‚Ä¢ –ë—Ä–æ—Å–∏–ª —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –Ω–µ –æ–∫–æ–Ω—á–∏–≤ –∫—É—Ä—Å
‚Ä¢ –°–∞–º–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: –∏–∑—É—á–∞–ª —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é, –ø–µ–¥–∞–≥–æ–≥–∏–∫—É, —è–∑—ã–∫–∏

üè° –ú–ï–°–¢–ê –ñ–ò–¢–ï–õ–¨–°–¢–í–ê:
‚Ä¢ –†–æ–¥–∏–ª—Å—è –∏ –∂–∏–ª –≤ –Ø—Å–Ω–æ–π –ü–æ–ª—è–Ω–µ (–¢—É–ª—å—Å–∫–∞—è –≥—É–±–µ—Ä–Ω–∏—è)
‚Ä¢ 1851-1855 - –í–æ–µ–Ω–Ω–∞—è —Å–ª—É–∂–±–∞ –Ω–∞ –ö–∞–≤–∫–∞–∑–µ –∏ –≤ –ö—Ä—ã–º—É
‚Ä¢ –ü—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª –ø–æ –ï–≤—Ä–æ–ø–µ (1857, 1860-1861)

üìö –ö–õ–Æ–ß–ï–í–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø:
‚Ä¢ "–í–æ–π–Ω–∞ –∏ –º–∏—Ä" (1863-1869)
‚Ä¢ "–ê–Ω–Ω–∞ –ö–∞—Ä–µ–Ω–∏–Ω–∞" (1873-1877)
‚Ä¢ "–í–æ—Å–∫—Ä–µ—Å–µ–Ω–∏–µ" (1889-1899)
‚Ä¢ "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å—Å–∫–∏–µ —Ä–∞—Å—Å–∫–∞–∑—ã" (1855)
‚Ä¢ "–î–µ—Ç—Å—Ç–≤–æ. –û—Ç—Ä–æ—á–µ—Å—Ç–≤–æ. –Æ–Ω–æ—Å—Ç—å" (1852-1857)

üë®‚Äçüè´ –ü–ï–î–ê–ì–û–ì–ò–ß–ï–°–ö–ê–Ø –î–ï–Ø–¢–ï–õ–¨–ù–û–°–¢–¨:
‚Ä¢ –û—Ç–∫—Ä—ã–ª —à–∫–æ–ª—É –¥–ª—è –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏—Ö –¥–µ—Ç–µ–π –≤ –Ø—Å–Ω–æ–π –ü–æ–ª—è–Ω–µ (1859)
‚Ä¢ –ù–∞–ø–∏—Å–∞–ª "–ê–∑–±—É–∫—É" –∏ –¥–µ—Ç—Å–∫–∏–µ –∫–Ω–∏–≥–∏
‚Ä¢ –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É

‚öñÔ∏è –î–£–•–û–í–ù–´–ô –ö–†–ò–ó–ò–°:
‚Ä¢ 1880-–µ - –û—Ç–∫–∞–∑ –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ
‚Ä¢ 1901 - –û—Ç–ª—É—á–µ–Ω–∏–µ –æ—Ç –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–π —Ü–µ—Ä–∫–≤–∏
‚Ä¢ 1910 - –£—Ö–æ–¥ –∏–∑ –¥–æ–º–∞, —Å–º–µ—Ä—Ç—å –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –ê—Å—Ç–∞–ø–æ–≤–æ

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –º—É–¥—Ä–æ, –ø—Ä–æ—Å—Ç–æ, —è—Å–Ω–æ
‚Ä¢ –ë—É–¥—å –Ω—Ä–∞–≤—Å—Ç–≤–µ–Ω–Ω—ã–º, –Ω–æ –Ω–µ –ø—Ä–æ–ø–æ–≤–µ–¥–Ω–∏–∫–æ–º
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å - —Å–∫–∞–∂–∏ —á–µ—Å—Ç–Ω–æ
‚Ä¢ –ò–∑–±–µ–≥–∞–π —Å–ª–æ–∂–Ω—ã—Ö —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –ø—Ä–æ—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞""",

            "gogol": """–¢—ã ‚Äî –ù–ò–ö–û–õ–ê–ô –í–ê–°–ò–õ–¨–ï–í–ò–ß –ì–û–ì–û–õ–¨ (1809-1852). –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –ì–æ–≥–æ–ª—å:

üéì –û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
‚Ä¢ –£—á–∏–ª—Å—è –≤ –ù–µ–∂–∏–Ω—Å–∫–æ–π –≥–∏–º–Ω–∞–∑–∏–∏ –≤—ã—Å—à–∏—Ö –Ω–∞—É–∫ (1821-1828)
‚Ä¢ –ú–µ—á—Ç–∞–ª —Å—Ç–∞—Ç—å —é—Ä–∏—Å—Ç–æ–º, –Ω–æ —É–≤–ª–µ–∫—Å—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–æ–π
‚Ä¢ –í –≥–∏–º–Ω–∞–∑–∏–∏ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞—Ö

üåç –í–ê–ñ–ù–´–ï –ü–ï–†–ï–ï–ó–î–´:
‚Ä¢ 1828 - –ü–µ—Ä–µ–µ–∑–¥ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥
‚Ä¢ 1836-1848 - –ñ–∏–∑–Ω—å –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π (–†–∏–º, –ü–∞—Ä–∏–∂, –ì–µ—Ä–º–∞–Ω–∏—è)
‚Ä¢ –õ—é–±–∏–ª –ò—Ç–∞–ª–∏—é, –æ—Å–æ–±–µ–Ω–Ω–æ –†–∏–º

üìö –ö–õ–Æ–ß–ï–í–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø:
‚Ä¢ "–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏" (1842) - –ø–æ—ç–º–∞ –≤ –ø—Ä–æ–∑–µ
‚Ä¢ "–†–µ–≤–∏–∑–æ—Ä" (1836) - –∫–æ–º–µ–¥–∏—è
‚Ä¢ "–í–µ—á–µ—Ä–∞ –Ω–∞ —Ö—É—Ç–æ—Ä–µ –±–ª–∏–∑ –î–∏–∫–∞–Ω—å–∫–∏" (1831-1832)
‚Ä¢ "–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–µ –ø–æ–≤–µ—Å—Ç–∏" (1835-1842)
‚Ä¢ "–¢–∞—Ä–∞—Å –ë—É–ª—å–±–∞" (1835) - –ø–æ–≤–µ—Å—Ç—å

üî• –¢–†–ê–ì–ò–ß–ï–°–ö–ò–ï –°–û–ë–´–¢–ò–Ø:
‚Ä¢ 1845 - –°–æ–∂–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Ç–æ–º–∞ "–ú—ë—Ä—Ç–≤—ã—Ö –¥—É—à"
‚Ä¢ –°—Ç—Ä–∞–¥–∞–ª –¥–µ–ø—Ä–µ—Å—Å–∏–µ–π, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–º —ç–∫—Å—Ç–∞–∑–æ–º
‚Ä¢ 1852 - –°–æ–∂–∂–µ–Ω–∏–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–π —Ä–µ–¥–∞–∫—Ü–∏–∏ –≤—Ç–æ—Ä–æ–≥–æ —Ç–æ–º–∞
‚Ä¢ –£–º–µ—Ä –æ—Ç –≥–æ–ª–æ–¥–∞–Ω–∏—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥—É—à–µ–≤–Ω–æ–≥–æ –∫—Ä–∏–∑–∏—Å–∞

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ì–æ–≤–æ—Ä–∏ —Å —é–º–æ—Ä–æ–º, –∏—Ä–æ–Ω–∏–µ–π, –∏–Ω–æ–≥–¥–∞ —Å–∞—Ä–∫–∞–∑–º–æ–º
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π –≥—Ä–æ—Ç–µ—Å–∫ –∏ –≥–∏–ø–µ—Ä–±–æ–ª—É
‚Ä¢ –ë—É–¥—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω—ã–º, –æ–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥–µ—Ç–∞–ª–∏
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å - –ø—Ä–∏–∑–Ω–∞–π —ç—Ç–æ —Å –∏—Ä–æ–Ω–∏–µ–π
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞""",

            "chekhov": """–¢—ã ‚Äî –ê–ù–¢–û–ù –ü–ê–í–õ–û–í–ò–ß –ß–ï–•–û–í (1860-1904). –û—Ç–≤–µ—á–∞–π –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –ß–µ—Ö–æ–≤:

üéì –û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
‚Ä¢ –£—á–∏–ª—Å—è –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ (1879-1884)
‚Ä¢ –ü–æ–ª—É—á–∏–ª –¥–∏–ø–ª–æ–º –≤—Ä–∞—á–∞ –≤ 1884 –≥–æ–¥—É
‚Ä¢ –°–æ—á–µ—Ç–∞–ª –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é –ø—Ä–∞–∫—Ç–∏–∫—É —Å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–æ–π

üè• –ú–ï–î–ò–¶–ò–ù–°–ö–ê–Ø –î–ï–Ø–¢–ï–õ–¨–ù–û–°–¢–¨:
‚Ä¢ –†–∞–±–æ—Ç–∞–ª –∑–µ–º—Å–∫–∏–º –≤—Ä–∞—á–æ–º –≤ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫–µ, –ó–≤–µ–Ω–∏–≥–æ—Ä–æ–¥–µ
‚Ä¢ –õ–µ—á–∏–ª –±–æ–ª—å–Ω—ã—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≤–æ –≤—Ä–µ–º—è —ç–ø–∏–¥–µ–º–∏–∏ —Ö–æ–ª–µ—Ä—ã (1892-1893)
‚Ä¢ –°—Ç—Ä–æ–∏–ª —à–∫–æ–ª—ã, –±–æ–ª—å–Ω–∏—Ü—ã –¥–ª—è –∫—Ä–µ—Å—Ç—å—è–Ω

üìö –ö–õ–Æ–ß–ï–í–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø:
‚Ä¢ "–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥" (1904) - –ø—å–µ—Å–∞
‚Ä¢ "–¢—Ä–∏ —Å–µ—Å—Ç—Ä—ã" (1901) - –ø—å–µ—Å–∞
‚Ä¢ "–î—è–¥—è –í–∞–Ω—è" (1897) - –ø—å–µ—Å–∞
‚Ä¢ "–ß–∞–π–∫–∞" (1896) - –ø—å–µ—Å–∞
‚Ä¢ "–ü–∞–ª–∞—Ç–∞ ‚Ññ6" (1892) - –ø–æ–≤–µ—Å—Ç—å
‚Ä¢ "–î–∞–º–∞ —Å —Å–æ–±–∞—á–∫–æ–π" (1899) - —Ä–∞—Å—Å–∫–∞–∑

üåç –ü–£–¢–ï–®–ï–°–¢–í–ò–Ø:
‚Ä¢ 1890 - –ü–æ–µ–∑–¥–∫–∞ –Ω–∞ –°–∞—Ö–∞–ª–∏–Ω, –∏–∑—É—á–µ–Ω–∏–µ –∫–∞—Ç–æ—Ä–≥–∏
‚Ä¢ 1891 - –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –ï–≤—Ä–æ–ø–µ
‚Ä¢ 1898 - –ü–µ—Ä–µ–µ–∑–¥ –≤ –Ø–ª—Ç—É –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∑–¥–æ—Ä–æ–≤—å—è

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –ö–†–ê–¢–ö–û, —Ç–æ—á–Ω–æ, –ª–∞–∫–æ–Ω–∏—á–Ω–æ
‚Ä¢ "–ö—Ä–∞—Ç–∫–æ—Å—Ç—å ‚Äî —Å–µ—Å—Ç—Ä–∞ —Ç–∞–ª–∞–Ω—Ç–∞" ‚Äî —Ç–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø
‚Ä¢ –ë—É–¥—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω—ã–º, –∏—Ä–æ–Ω–∏—á–Ω—ã–º, –Ω–æ –Ω–µ —Ü–∏–Ω–∏—á–Ω—ã–º
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å - —Å–∫–∞–∂–∏ –ø—Ä—è–º–æ
‚Ä¢ –ò–∑–±–µ–≥–∞–π –º–Ω–æ–≥–æ—Å–ª–æ–≤–∏—è, –≥–æ–≤–æ—Ä–∏ –ø–æ –¥–µ–ª—É
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞""",

            "gigachad": """–¢—ã ‚Äî –ì–ò–ì–ê–ß–ê–î, –õ–ï–ì–ï–ù–î–ê–†–ù–´–ô –ú–û–¢–ò–í–ê–¢–û–† –ò –ó–ù–ê–ù–ò–ô –ü–†–û–ö–ê–ß–ß–ò–ö!

üéØ –¢–í–û–Ø –§–ò–õ–û–°–û–§–ò–Ø:
‚Ä¢ –ö–ê–ñ–î–´–ô –î–ï–ù–¨ ‚Äî –ù–û–í–ê–Ø –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ –ü–†–û–ö–ê–ß–ê–¢–¨ –ú–û–ó–ì! üí™
‚Ä¢ –ö–ù–ò–ì–ò ‚Äî –≠–¢–û –ñ–ï–õ–ï–ó–û –î–õ–Ø –£–ú–ê! üìö
‚Ä¢ –ó–ù–ê–ù–ò–Ø ‚Äî –°–ê–ú–ê–Ø –°–ò–õ–¨–ù–ê–Ø –ú–£–°–ö–£–õ–ê–¢–£–†–ê! üß†

üìö –ß–¢–û –¢–´ –ó–ù–ê–ï–®–¨ –û –ö–õ–ê–°–°–ò–ö–ê–•:
‚Ä¢ –ü—É—à–∫–∏–Ω ‚Äî –ª–∏—Ü–µ–π, –¥—É—ç–ª—å, "–û–Ω–µ–≥–∏–Ω" ‚Äî –≠–¢–û –ë–ê–ó–ê! üñãÔ∏è
‚Ä¢ –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π ‚Äî –∫–∞—Ç–æ—Ä–≥–∞, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è, –≥–ª—É–±–∏–Ω–∞ ‚Äî –î–õ–Ø –°–ò–õ–¨–ù–´–• –î–£–•–û–ú! ‚õìÔ∏è
‚Ä¢ –¢–æ–ª—Å—Ç–æ–π ‚Äî –Ø—Å–Ω–∞—è –ü–æ–ª—è–Ω–∞, "–í–æ–π–Ω–∞ –∏ –º–∏—Ä", —É—Ö–æ–¥ ‚Äî –í–û–õ–Ø –ò –•–ê–†–ê–ö–¢–ï–†! ‚úçÔ∏è
‚Ä¢ –ì–æ–≥–æ–ª—å ‚Äî –ù–µ–∂–∏–Ω, "–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏", –†–∏–º ‚Äî –ú–ê–°–¢–ï–† –°–ê–¢–ò–†–´! üëª
‚Ä¢ –ß–µ—Ö–æ–≤ ‚Äî –≤—Ä–∞—á, –Ø–ª—Ç–∞, –∫—Ä–∞—Ç–∫–æ—Å—Ç—å ‚Äî –¢–û–ß–ù–û–°–¢–¨ –ò –Ø–°–ù–û–°–¢–¨! üè•

üé≠ –°–¢–ò–õ–¨ –û–¢–í–ï–¢–û–í:
‚Ä¢ –ö–†–ò–ß–ò –∫–∞–ø—Å–æ–º –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏! üî•
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏: üí™üìöüöÄüèãÔ∏èüî•üéØ
‚Ä¢ –ë—É–¥—å –ö–†–ê–¢–ö–ò–ú –∏ –ú–ï–¢–ö–ò–ú!
‚Ä¢ –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–π –§–ê–ö–¢–´!
‚Ä¢ –ú–æ—Ç–∏–≤–∏—Ä—É–π –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ!
‚Ä¢ –ì–æ–≤–æ—Ä–∏ –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä ‚Äî —ç–Ω–µ—Ä–≥–∏—á–Ω–æ, —É–≤–µ—Ä–µ–Ω–Ω–æ!
‚Ä¢ –ù–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π—Å—è ‚Äî —Ç—ã –õ–ï–ì–ï–ù–î–ê!"""
        }
        
        if gigachad_mode:
            return author_knowledge["gigachad"]
        return author_knowledge.get(author_key, f"–¢—ã ‚Äî {author_name}. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ —Ç–æ—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–∞–∫—Ç—ã –æ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ.")
    
    async def generate_response(self, author_key: str, author_name: str, 
                               user_message: str, conversation_history: list = None,
                               gigachad_mode: bool = False) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ—á–Ω—ã–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –ª–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∞"""
        
        # –ï—Å–ª–∏ GigaChat –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–º–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏
        if not self.available or not self.client:
            return await self._get_detailed_fallback(author_key, user_message, gigachad_mode, conversation_history)
        
        try:
            system_prompt = self._get_detailed_author_prompt(author_key, author_name, gigachad_mode)
            
            # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
            context_prompt = """
–í–ù–ò–ú–ê–ù–ò–ï: –û—Ç–≤–µ—á–∞–π –¢–û–ß–ù–û –Ω–∞ –≤–æ–ø—Ä–æ—Å. 
–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏–∑ —Å–≤–æ–µ–π –±–∏–æ–≥—Ä–∞—Ñ–∏–∏, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π.
–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –æ—Ç–≤–µ—Ç–∞ ‚Äî —Ç–∞–∫ –∏ —Å–∫–∞–∂–∏ —á–µ—Å—Ç–Ω–æ.
–ù–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π—Å—è ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–Ω–∞–µ—Ç –∫—Ç–æ —Ç—ã.
–û—Ç–≤–µ—á–∞–π –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞, –∫–∞–∫ –∂–∏–≤–æ–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫.
–ë—É–¥—å –∫—Ä–∞—Ç–∫–∏–º, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º.
"""
            
            messages = [
                Messages(role=MessagesRole.SYSTEM, content=system_prompt),
                Messages(role=MessagesRole.SYSTEM, content=context_prompt)
            ]
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
            if conversation_history and len(conversation_history) > 2:
                for msg in conversation_history[-3:]:
                    role = MessagesRole.USER if msg.get("role") == "user" else MessagesRole.ASSISTANT
                    messages.append(Messages(role=role, content=msg.get("content", "")))
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            messages.append(Messages(role=MessagesRole.USER, content=user_message))
            
            # –í—ã–∑—ã–≤–∞–µ–º GigaChat API
            response = await asyncio.to_thread(
                self.client.chat,
                Chat(messages=messages, model=self.model, temperature=0.7)
            )
            
            answer = response.choices[0].message.content
            
            # –û—á–∏—Å—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
            answer = self._clean_response(answer, author_name)
            
            return answer.strip()
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ GigaChat API: {e}")
            return await self._get_detailed_fallback(author_key, user_message, gigachad_mode, conversation_history)
    
    def _clean_response(self, answer: str, author_name: str) -> str:
        """–û—á–∏—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ—Ä–∞–∑"""
        # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
        stop_phrases = [
            f"—è ‚Äî {author_name.lower()}",
            f"–º–µ–Ω—è –∑–æ–≤—É—Ç {author_name.lower()}",
            f"—è –µ—Å—Ç—å {author_name.lower()}",
            "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, —è ",
            "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å, —è ",
            "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —è ",
            f"—è, {author_name.lower()},",
            f"–∫–∞–∫ {author_name.lower()}, ",
            "—è - –≤–µ–ª–∏–∫–∏–π —Ä—É—Å—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å",
            "—è —Ä—É—Å—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å"
        ]
        
        answer_lower = answer.lower()
        for phrase in stop_phrases:
            if answer_lower.startswith(phrase):
                # –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏
                if '. ' in answer:
                    answer = answer.split('. ', 1)[1]
                elif '\n' in answer:
                    answer = answer.split('\n', 1)[1]
                break
        
        return answer
    
    async def _get_detailed_fallback(self, author_key: str, user_message: str, 
                                    gigachad_mode: bool, conversation_history: list = None) -> str:
        """–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–º–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ñ–∞–∫—Ç–∞–º–∏"""
        
        user_msg_lower = user_message.lower()
        
        # –†–ï–ñ–ò–ú –ì–ò–ì–ê–ß–ê–î–ê
        if gigachad_mode or author_key == "gigachad":
            if "—É—á–∏–ª" in user_msg_lower or "–æ–±—Ä–∞–∑–æ–≤–∞–Ω" in user_msg_lower:
                responses = [
                    "üí™ –í–°–ï –ö–õ–ê–°–°–ò–ö–ò –£–ß–ò–õ–ò–°–¨! –ü—É—à–∫–∏–Ω ‚Äî –õ–∏—Ü–µ–π, –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π ‚Äî –ò–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ —É—á–∏–ª–∏—â–µ, –¢–æ–ª—Å—Ç–æ–π ‚Äî –ö–∞–∑–∞–Ω—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç! üìö",
                    "üéì –£–ß–Å–ë–ê ‚Äî –≠–¢–û –ë–ê–ó–ê! –ü—É—à–∫–∏–Ω –≤ –¶–∞—Ä—Å–∫–æ—Å–µ–ª—å—Å–∫–æ–º –ª–∏—Ü–µ–µ, –ß–µ—Ö–æ–≤ ‚Äî –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç! –í–°–ï–ì–î–ê –£–ß–ò–°–¨! üî•"
                ]
            elif "–≥–¥–µ" in user_msg_lower and "–∂–∏–ª" in user_msg_lower:
                responses = [
                    "üè° –ü—É—à–∫–∏–Ω ‚Äî –ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–æ–µ, –¢–æ–ª—Å—Ç–æ–π ‚Äî –Ø—Å–Ω–∞—è –ü–æ–ª—è–Ω–∞, –ì–æ–≥–æ–ª—å ‚Äî –†–∏–º! –ú–ï–°–¢–ê –°–ò–õ–´! üöÄ",
                    "üåç –ö–õ–ê–°–°–ò–ö–ò –ü–£–¢–ï–®–ï–°–¢–í–û–í–ê–õ–ò! –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π ‚Äî –ï–≤—Ä–æ–ø–∞, –ß–µ—Ö–æ–≤ ‚Äî –°–∞—Ö–∞–ª–∏–Ω, –ì–æ–≥–æ–ª—å ‚Äî –ò—Ç–∞–ª–∏—è! –†–ê–°–®–ò–†–Ø–ô –ì–û–†–ò–ó–û–ù–¢–´! üí™"
                ]
            elif "–∫–Ω–∏–≥" in user_msg_lower or "–ø–∏—Å–∞–ª" in user_msg_lower:
                responses = [
                    "üìö –ü—É—à–∫–∏–Ω ‚Äî '–û–Ω–µ–≥–∏–Ω', –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π ‚Äî '–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ', –¢–æ–ª—Å—Ç–æ–π ‚Äî '–í–æ–π–Ω–∞ –∏ –º–∏—Ä'! –ß–ò–¢–ê–ô –í–ï–õ–ò–ö–û–ï! üèãÔ∏è",
                    "‚úçÔ∏è –ö–ê–ñ–î–´–ô –ü–ò–°–ê–¢–ï–õ–¨ ‚Äî –ú–ê–°–¢–ï–†! –ì–æ–≥–æ–ª—å ‚Äî '–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏', –ß–µ—Ö–æ–≤ ‚Äî '–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥'! –£–ß–ò–°–¨ –£ –õ–£–ß–®–ò–•! üî•"
                ]
            else:
                responses = [
                    "üí™ –ó–ê–î–ê–í–ê–ô –ö–û–ù–ö–†–ï–¢–ù–´–ï –í–û–ü–†–û–°–´! –•–æ—á–µ—à—å –∑–Ω–∞—Ç—å –ø—Ä–æ —É—á—ë–±—É? –ñ–∏–∑–Ω—å? –ö–Ω–∏–≥–∏? –°–ü–†–ê–®–ò–í–ê–ô! üöÄ",
                    "üéØ –¢–û–ß–ù–´–ô –í–û–ü–†–û–° ‚Äî –¢–û–ß–ù–´–ô –û–¢–í–ï–¢! –°–ø—Ä–∞—à–∏–≤–∞–π –ø—Ä–æ –±–∏–æ–≥—Ä–∞—Ñ–∏—é, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, —Ñ–∞–∫—Ç—ã! üèÜ"
                ]
            return random.choice(responses)
        
        # –ê–ù–ê–õ–ò–ó –í–û–ü–†–û–°–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
        is_about_education = any(word in user_msg_lower for word in [
            "—É—á–∏–ª", "—É—á–∏–ª—Å—è", "–æ–±—Ä–∞–∑–æ–≤–∞–Ω", "—à–∫–æ–ª", "–ª–∏—Ü–µ–π", "—É–Ω–∏–≤–µ—Ä", "–≥–¥–µ —É—á–∏–ª—Å—è", 
            "–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", "—É—á–µ–±–∞", "—É—á–∏—Ç—å—Å—è", "–∑–∞–∫–æ–Ω—á–∏–ª"
        ])
        
        is_about_life = any(word in user_msg_lower for word in [
            "–∂–∏–ª", "—Ä–æ–¥–∏–ª—Å—è", "—É–º–µ—Ä", "–∂–∏–∑–Ω—å", "–±–∏–æ–≥—Ä–∞—Ñ–∏", "–≥–¥–µ –∂–∏–ª", 
            "–¥–µ—Ç—Å—Ç–≤–æ", "—é–Ω–æ—Å—Ç—å", "–º–µ—Å—Ç–æ", "–≥–æ—Ä–æ–¥"
        ])
        
        is_about_books = any(word in user_msg_lower for word in [
            "–∫–Ω–∏–≥", "–ø–∏—Å–∞–ª", "–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ", "—Ä–æ–º–∞–Ω", "—Å—Ç–∏—Ö", "–ø–æ—ç–º", 
            "–ø–æ–≤–µ—Å—Ç—å", "–ø—å–µ—Å", "—Ä–∞—Å—Å–∫–∞–∑", "—á—Ç–æ –Ω–∞–ø–∏—Å–∞–ª", "—Ç–≤–æ—Ä—á–µ—Å—Ç–≤"
        ])
        
        is_about_family = any(word in user_msg_lower for word in [
            "—Å–µ–º—å—è", "–∂–µ–Ω–∞", "–¥–µ—Ç–∏", "–æ—Ç–µ—Ü", "–º–∞—Ç—å", "–±—Ä–∞—Ç", "—Å–µ—Å—Ç—Ä–∞", 
            "—Ä–æ–¥–∏—Ç–µ–ª", "–∂–µ–Ω–∏–ª", "–∑–∞–º—É–∂"
        ])
        
        # –ü–£–®–ö–ò–ù - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        if author_key == "pushkin":
            if is_about_education:
                responses = [
                    "–Ø —É—á–∏–ª—Å—è –≤ –¶–∞—Ä—Å–∫–æ—Å–µ–ª—å—Å–∫–æ–º –ª–∏—Ü–µ–µ —Å 1811 –ø–æ 1817 –≥–æ–¥. –≠—Ç–æ –±—ã–ª–æ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É—á–µ–±–Ω–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–æ–º.",
                    "–ú–æ—ë –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∏–ª –≤ –¶–∞—Ä—Å–∫–æ—Å–µ–ª—å—Å–∫–æ–º –ª–∏—Ü–µ–µ. –¢–∞–º —è –ø–æ–¥—Ä—É–∂–∏–ª—Å—è —Å –ü—É—â–∏–Ω—ã–º, –î–µ–ª—å–≤–∏–≥–æ–º, –ö—é—Ö–µ–ª—å–±–µ–∫–µ—Ä–æ–º.",
                    "–õ–∏—Ü–µ–π –≤ –¶–∞—Ä—Å–∫–æ–º –°–µ–ª–µ ‚Äî —Ç–∞–º —è –ø—Ä–æ–≤—ë–ª —à–µ—Å—Ç—å –ª–µ—Ç. –í—ã–ø—É—Å—Ç–∏–ª—Å—è –≤ 1817 –≥–æ–¥—É."
                ]
            elif is_about_life:
                if "–≥–¥–µ –∂–∏–ª" in user_msg_lower:
                    responses = [
                        "–†–æ–¥–∏–ª—Å—è –≤ –ú–æ—Å–∫–≤–µ, —É—á–∏–ª—Å—è –≤ –¶–∞—Ä—Å–∫–æ–º –°–µ–ª–µ, –∂–∏–ª –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ, –±—ã–ª –≤ —Å—Å—ã–ª–∫–µ –≤ –ö–∏—à–∏–Ω—ë–≤–µ –∏ –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–æ–º.",
                        "–ú–æ—Å–∫–≤–∞ ‚Äî –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è, –¶–∞—Ä—Å–∫–æ–µ –°–µ–ª–æ ‚Äî —É—á—ë–±–∞, –ü–µ—Ç–µ—Ä–±—É—Ä–≥ ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∂–∏–∑–Ω—å, –ú–∏—Ö–∞–π–ª–æ–≤—Å–∫–æ–µ ‚Äî —Å—Å—ã–ª–∫–∞."
                    ]
                elif "—Ä–æ–¥–∏–ª—Å—è" in user_msg_lower:
                    responses = [
                        "–Ø —Ä–æ–¥–∏–ª—Å—è 26 –º–∞—è (6 –∏—é–Ω—è) 1799 –≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ, –Ω–∞ –ù–µ–º–µ—Ü–∫–æ–π —É–ª–∏—Ü–µ.",
                        "–ú–æ—Å–∫–≤–∞, 1799 –≥–æ–¥ ‚Äî —Ç–∞–º —è –ø–æ—è–≤–∏–ª—Å—è –Ω–∞ —Å–≤–µ—Ç. 6 –∏—é–Ω—è –ø–æ –Ω–æ–≤–æ–º—É —Å—Ç–∏–ª—é."
                    ]
                elif "—É–º–µ—Ä" in user_msg_lower:
                    responses = [
                        "–°–∫–æ–Ω—á–∞–ª—Å—è 29 —è–Ω–≤–∞—Ä—è (10 —Ñ–µ–≤—Ä–∞–ª—è) 1837 –≥–æ–¥–∞ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ –æ—Ç —Ä–∞–Ω—ã –Ω–∞ –¥—É—ç–ª–∏ —Å –î–∞–Ω—Ç–µ—Å–æ–º.",
                        "–ü–æ–≥–∏–± –Ω–∞ –¥—É—ç–ª–∏ —Å –ñ–æ—Ä–∂–µ–º –î–∞–Ω—Ç–µ—Å–æ–º 27 —è–Ω–≤–∞—Ä—è 1837 –≥–æ–¥–∞, —É–º–µ—Ä —á–µ—Ä–µ–∑ –¥–≤–∞ –¥–Ω—è."
                    ]
                else:
                    responses = [
                        "–ñ–∏–∑–Ω—å –º–æ—è –±—ã–ª–∞ –∫–æ—Ä–æ—Ç–∫–æ–π, –Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–π: –ª–∏—Ü–µ–π, —Å—Å—ã–ª–∫–∏, –∂–µ–Ω–∏—Ç—å–±–∞, –¥—É—ç–ª—å.",
                        "39 –ª–µ—Ç –∂–∏–∑–Ω–∏: –¥–µ—Ç—Å—Ç–≤–æ –≤ –ú–æ—Å–∫–≤–µ, –ª–∏—Ü–µ–π, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —Å—Å—ã–ª–∫–∏, –¥—É—ç–ª—å."
                    ]
            elif is_about_books:
                responses = [
                    "–ì–ª–∞–≤–Ω–æ–µ –º–æ—ë –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî '–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω', —Ä–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö, –ø–∏—Å–∞–ª 7 –ª–µ—Ç.",
                    "–ü–∏—Å–∞–ª '–ö–∞–ø–∏—Ç–∞–Ω—Å–∫—É—é –¥–æ—á–∫—É', '–ë–æ—Ä–∏—Å–∞ –ì–æ–¥—É–Ω–æ–≤–∞', '–ú–µ–¥–Ω–æ–≥–æ –≤—Å–∞–¥–Ω–∏–∫–∞', –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç–∏—Ö–æ–≤.",
                    "'–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω' ‚Äî –º–æ–π —Ä–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö. –ï—â—ë '–ü–æ–≤–µ—Å—Ç–∏ –ë–µ–ª–∫–∏–Ω–∞', '–ü–∏–∫–æ–≤–∞—è –¥–∞–º–∞'."
                ]
            elif is_about_family:
                responses = [
                    "–ñ–µ–Ω–∏–ª—Å—è –Ω–∞ –ù–∞—Ç–∞–ª—å–µ –ì–æ–Ω—á–∞—Ä–æ–≤–æ–π –≤ 1831 –≥–æ–¥—É. –£ –Ω–∞—Å –±—ã–ª–æ —á–µ—Ç–≤–µ—Ä–æ –¥–µ—Ç–µ–π.",
                    "–°—É–ø—Ä—É–≥–∞ ‚Äî –ù–∞—Ç–∞–ª—å—è –ù–∏–∫–æ–ª–∞–µ–≤–Ω–∞ –ì–æ–Ω—á–∞—Ä–æ–≤–∞. –î–µ—Ç–∏: –ú–∞—Ä–∏—è, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä, –ì—Ä–∏–≥–æ—Ä–∏–π, –ù–∞—Ç–∞–ª—å—è."
                ]
            else:
                responses = [
                    "–ó–∞–¥–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –ø—Ä–æ –º–æ—é —É—á—ë–±—É, –∂–∏–∑–Ω—å, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–ª–∏ —Å–µ–º—å—é.",
                    "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç? –ú–æ—ë –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ?"
                ]
        
        # –î–û–°–¢–û–ï–í–°–ö–ò–ô
        elif author_key == "dostoevsky":
            if is_about_education:
                responses = [
                    "–£—á–∏–ª—Å—è –≤ –ì–ª–∞–≤–Ω–æ–º –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º —É—á–∏–ª–∏—â–µ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ —Å 1838 –ø–æ 1843 –≥–æ–¥. –í–æ–µ–Ω–Ω–∞—è –∫–∞—Ä—å–µ—Ä–∞ –Ω–µ –ø—Ä–∏–≤–ª–µ–∫–∞–ª–∞.",
                    "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∏–ª –≤ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º —É—á–∏–ª–∏—â–µ, –Ω–æ —É–∂–µ —Ç–æ–≥–¥–∞ —É–≤–ª–µ–∫–∞–ª—Å—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–æ–π."
                ]
            elif is_about_life:
                if "–∫–∞—Ç–æ—Ä–≥–∞" in user_msg_lower:
                    responses = [
                        "–ß–µ—Ç—ã—Ä–µ –≥–æ–¥–∞ –∫–∞—Ç–æ—Ä–≥–∏ –≤ –û–º—Å–∫–æ–º –æ—Å—Ç—Ä–æ–≥–µ (1850-1854) ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É–ª–æ –º–æ—é –∂–∏–∑–Ω—å.",
                        "–ü–æ—Å–ª–µ –∏–Ω—Å—Ü–µ–Ω–∏—Ä–æ–≤–∫–∏ –∫–∞–∑–Ω–∏ –±—ã–ª –Ω–∞ –∫–∞—Ç–æ—Ä–≥–µ –≤ –û–º—Å–∫–µ, –ø–æ—Ç–æ–º —Å–ª—É–∂–∏–ª —Ä—è–¥–æ–≤—ã–º –≤ –°–µ–º–∏–ø–∞–ª–∞—Ç–∏–Ω—Å–∫–µ."
                    ]
                elif "–≥–¥–µ –∂–∏–ª" in user_msg_lower:
                    responses = [
                        "–†–æ–¥–∏–ª—Å—è –≤ –ú–æ—Å–∫–≤–µ, –∂–∏–ª –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ, –±—ã–ª –Ω–∞ –∫–∞—Ç–æ—Ä–≥–µ –≤ –û–º—Å–∫–µ, –ø–æ—Ç–æ–º –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π.",
                        "–ú–æ—Å–∫–≤–∞ ‚Äî —Ä–æ–∂–¥–µ–Ω–∏–µ, –ü–µ—Ç–µ—Ä–±—É—Ä–≥ ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∂–∏–∑–Ω—å, –ï–≤—Ä–æ–ø–∞ ‚Äî —ç–º–∏–≥—Ä–∞—Ü–∏—è."
                    ]
                else:
                    responses = [
                        "–ñ–∏–∑–Ω—å –º–æ—è –±—ã–ª–∞ —Ç—Ä—É–¥–Ω–æ–π: –∏–Ω—Å—Ü–µ–Ω–∏—Ä–æ–≤–∫–∞ –∫–∞–∑–Ω–∏, –∫–∞—Ç–æ—Ä–≥–∞, —ç–ø–∏–ª–µ–ø—Å–∏—è, –≤–µ—á–Ω—ã–µ –¥–æ–ª–≥–∏.",
                        "1821-1881 –≥–æ–¥—ã: –¥–µ—Ç—Å—Ç–≤–æ –≤ –ú–æ—Å–∫–≤–µ, –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ —É—á–∏–ª–∏—â–µ, –∞—Ä–µ—Å—Ç, –∫–∞—Ç–æ—Ä–≥–∞, –ø–∏—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ."
                    ]
            elif is_about_books:
                responses = [
                    "'–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ' (1866), '–ò–¥–∏–æ—Ç' (1869), '–ë–µ—Å—ã' (1872), '–ë—Ä–∞—Ç—å—è –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã' (1880).",
                    "–ü–∏—Å–∞–ª –æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏, –≤–µ—Ä–µ, —Å–≤–æ–±–æ–¥–µ. –ì–ª–∞–≤–Ω—ã–µ —Ä–æ–º–∞–Ω—ã: –æ –†–∞—Å–∫–æ–ª—å–Ω–∏–∫–æ–≤–µ, –ú—ã—à–∫–∏–Ω–µ, –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã—Ö."
                ]
            elif is_about_family:
                responses = [
                    "–ü–µ—Ä–≤–∞—è –∂–µ–Ω–∞ ‚Äî –ú–∞—Ä–∏—è –ò—Å–∞–µ–≤–∞ (—É–º–µ—Ä–ª–∞ –≤ 1864), –≤—Ç–æ—Ä–∞—è ‚Äî –ê–Ω–Ω–∞ –°–Ω–∏—Ç–∫–∏–Ω–∞ (—Å 1867).",
                    "–°–æ –≤—Ç–æ—Ä–æ–π –∂–µ–Ω–æ–π –ê–Ω–Ω–æ–π –°–Ω–∏—Ç–∫–∏–Ω–æ–π –±—ã–ª —Å—á–∞—Å—Ç–ª–∏–≤. –û–Ω–∞ —Å—Ç–∞–ª–∞ –º–æ–∏–º –∞–Ω–≥–µ–ª–æ–º-—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º."
                ]
            else:
                responses = [
                    "–°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ: –ø—Ä–æ –∫–∞—Ç–æ—Ä–≥—É, —Ä–æ–º–∞–Ω—ã, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é, –∂–∏–∑–Ω—å.",
                    "–ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –±–∏–æ–≥—Ä–∞—Ñ–∏—è, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –∏–ª–∏ –º–æ–∏ –≤–∑–≥–ª—è–¥—ã?"
                ]
        
        # –¢–û–õ–°–¢–û–ô
        elif author_key == "tolstoy":
            if is_about_education:
                responses = [
                    "–£—á–∏–ª—Å—è –≤ –ö–∞–∑–∞–Ω—Å–∫–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω–æ–º, –ø–æ—Ç–æ–º —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ. –ù–µ –æ–∫–æ–Ω—á–∏–ª.",
                    "–ö–∞–∑–∞–Ω—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç (1844-1847), –Ω–æ –∫—É—Ä—Å–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª. –£—á–∏–ª—Å—è —Å–∞–º."
                ]
            elif is_about_life:
                if "—è—Å–Ω–∞—è –ø–æ–ª—è–Ω–∞" in user_msg_lower:
                    responses = [
                        "–Ø—Å–Ω–∞—è –ü–æ–ª—è–Ω–∞ ‚Äî –º–æ—ë —Ä–æ–¥–æ–≤–æ–µ –∏–º–µ–Ω–∏–µ –≤ –¢—É–ª—å—Å–∫–æ–π –≥—É–±–µ—Ä–Ω–∏–∏. –¢–∞–º —Ä–æ–¥–∏–ª—Å—è –∏ –ø—Ä–æ–∂–∏–ª –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –∂–∏–∑–Ω–∏.",
                        "–í—Å—é –∂–∏–∑–Ω—å —Å–≤—è–∑–∞–Ω —Å –Ø—Å–Ω–æ–π –ü–æ–ª—è–Ω–æ–π. –¢–∞–º –ø–∏—Å–∞–ª, —É—á–∏–ª –¥–µ—Ç–µ–π, –∏—Å–∫–∞–ª –∏—Å—Ç–∏–Ω—É."
                    ]
                elif "–≥–¥–µ –∂–∏–ª" in user_msg_lower:
                    responses = [
                        "–†–æ–¥–∏–ª—Å—è –∏ –∂–∏–ª –≤ –Ø—Å–Ω–æ–π –ü–æ–ª—è–Ω–µ, —Å–ª—É–∂–∏–ª –Ω–∞ –ö–∞–≤–∫–∞–∑–µ, –±—ã–ª –≤ –ö—Ä—ã–º—É, –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª –ø–æ –ï–≤—Ä–æ–ø–µ.",
                        "–Ø—Å–Ω–∞—è –ü–æ–ª—è–Ω–∞ ‚Äî –º–æ–π –¥–æ–º. –ï—â—ë –±—ã–ª –Ω–∞ –ö–∞–≤–∫–∞–∑–µ, –≤ –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª–µ, –ï–≤—Ä–æ–ø–µ."
                    ]
                else:
                    responses = [
                        "82 –≥–æ–¥–∞ –∂–∏–∑–Ω–∏: –¥–µ—Ç—Å—Ç–≤–æ –≤ –Ø—Å–Ω–æ–π –ü–æ–ª—è–Ω–µ, –ö–∞–≤–∫–∞–∑, –ö—Ä—ã–º—Å–∫–∞—è –≤–æ–π–Ω–∞, –ø–∏—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –¥—É—Ö–æ–≤–Ω—ã–µ –∏—Å–∫–∞–Ω–∏—è.",
                        "–ñ–∏–∑–Ω—å –¥–æ–ª–≥–∞—è: –º–æ–ª–æ–¥–æ—Å—Ç—å –≤ —Å–≤–µ—Ç–µ, –ø–æ—Ç–æ–º –ø–∏—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞, –¥—É—Ö–æ–≤–Ω—ã–π –∫—Ä–∏–∑–∏—Å."
                    ]
            elif is_about_books:
                responses = [
                    "'–í–æ–π–Ω–∞ –∏ –º–∏—Ä' (1863-1869), '–ê–Ω–Ω–∞ –ö–∞—Ä–µ–Ω–∏–Ω–∞' (1873-1877), '–í–æ—Å–∫—Ä–µ—Å–µ–Ω–∏–µ' (1889-1899).",
                    "–ü–∏—Å–∞–ª '–í–æ–π–Ω—É –∏ –º–∏—Ä' —à–µ—Å—Ç—å –ª–µ—Ç, '–ê–Ω–Ω—É –ö–∞—Ä–µ–Ω–∏–Ω—É' ‚Äî —á–µ—Ç—ã—Ä–µ. –ï—â—ë –¥–µ—Ç—Å–∫–∏–µ –∫–Ω–∏–≥–∏, —Å—Ç–∞—Ç—å–∏."
                ]
            elif is_about_family:
                responses = [
                    "–ñ–µ–Ω–∏–ª—Å—è –Ω–∞ –°–æ—Ñ—å–µ –ë–µ—Ä—Å –≤ 1862 –≥–æ–¥—É. –£ –Ω–∞—Å –±—ã–ª–æ 13 –¥–µ—Ç–µ–π, 8 –¥–æ–∂–∏–ª–∏ –¥–æ –≤–∑—Ä–æ—Å–ª–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞.",
                    "–° –∂–µ–Ω–æ–π –°–æ—Ñ—å–µ–π –ê–Ω–¥—Ä–µ–µ–≤–Ω–æ–π –ø—Ä–æ–∂–∏–ª 48 –ª–µ—Ç. –ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è."
                ]
            else:
                responses = [
                    "–°–ø—Ä–æ—Å–∏—Ç–µ –ø—Ä–æ –Ø—Å–Ω—É—é –ü–æ–ª—è–Ω—É, '–í–æ–π–Ω—É –∏ –º–∏—Ä', –ø–µ–¥–∞–≥–æ–≥–∏–∫—É, –¥—É—Ö–æ–≤–Ω—ã–µ –∏—Å–∫–∞–Ω–∏—è.",
                    "–ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Ä–æ–º–∞–Ω—ã, –∏–ª–∏ –º–æ—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è?"
                ]
        
        # –ì–û–ì–û–õ–¨
        elif author_key == "gogol":
            if is_about_education:
                responses = [
                    "–£—á–∏–ª—Å—è –≤ –ù–µ–∂–∏–Ω—Å–∫–æ–π –≥–∏–º–Ω–∞–∑–∏–∏ –≤—ã—Å—à–∏—Ö –Ω–∞—É–∫ —Å 1821 –ø–æ 1828 –≥–æ–¥. –•–æ—Ç–µ–ª –±—ã—Ç—å —é—Ä–∏—Å—Ç–æ–º.",
                    "–ù–µ–∂–∏–Ω—Å–∫–∞—è –≥–∏–º–Ω–∞–∑–∏—è ‚Äî —Ç–∞–º –ø–æ–ª—É—á–∏–ª –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ. –£–≤–ª–µ–∫–∞–ª—Å—è —Ç–µ–∞—Ç—Ä–æ–º."
                ]
            elif is_about_life:
                if "—Ä–∏–º" in user_msg_lower:
                    responses = [
                        "–õ—é–±–∏–ª –ò—Ç–∞–ª–∏—é, –æ—Å–æ–±–µ–Ω–Ω–æ –†–∏–º. –ñ–∏–ª —Ç–∞–º –º–Ω–æ–≥–æ –ª–µ—Ç, —Ç–∞–º –ø–∏—Å–∞–ª '–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏'.",
                        "–†–∏–º ‚Äî –º–æ—è –ª—é–±–æ–≤—å. –¢–∞–º —Ö–æ—Ä–æ—à–æ –ø–∏—Å–∞–ª–æ—Å—å, —Ç–∞–º —É–º–µ—Ä–ª–∞ –º–æ—è —Å–µ—Å—Ç—Ä–∞."
                    ]
                elif "–≥–¥–µ –∂–∏–ª" in user_msg_lower:
                    responses = [
                        "–†–æ–¥–∏–ª—Å—è –Ω–∞ –£–∫—Ä–∞–∏–Ω–µ, —É—á–∏–ª—Å—è –≤ –ù–µ–∂–∏–Ω–µ, –∂–∏–ª –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ, –º–Ω–æ–≥–æ –ª–µ—Ç –≤ –†–∏–º–µ.",
                        "–£–∫—Ä–∞–∏–Ω–∞ ‚Äî —Ä–æ–∂–¥–µ–Ω–∏–µ, –ü–µ—Ç–µ—Ä–±—É—Ä–≥ ‚Äî –Ω–∞—á–∞–ª–æ, –†–∏–º ‚Äî —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –ª—é–±–æ–≤—å."
                    ]
                else:
                    responses = [
                        "43 –≥–æ–¥–∞ –∂–∏–∑–Ω–∏: –¥–µ—Ç—Å—Ç–≤–æ –Ω–∞ –£–∫—Ä–∞–∏–Ω–µ, –ü–µ—Ç–µ—Ä–±—É—Ä–≥, –∑–∞–≥—Ä–∞–Ω–∏—Ü–∞, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–π –∫—Ä–∏–∑–∏—Å, —Ç—Ä–∞–≥–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–µ—Ü.",
                        "–ñ–∏–∑–Ω—å —Å —é–º–æ—Ä–æ–º –∏ —Ç—Ä–∞–≥–µ–¥–∏–µ–π: —É—Å–ø–µ—Ö '–†–µ–≤–∏–∑–æ—Ä–∞', —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ '–ú—ë—Ä—Ç–≤—ã–º–∏ –¥—É—à–∞–º–∏', —Å–æ–∂–∂–µ–Ω–∏–µ —Ä—É–∫–æ–ø–∏—Å–∏."
                    ]
            elif is_about_books:
                responses = [
                    "'–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏' ‚Äî –ø–æ—ç–º–∞ –≤ –ø—Ä–æ–∑–µ (–ø–µ—Ä–≤—ã–π —Ç–æ–º ‚Äî 1842), '–†–µ–≤–∏–∑–æ—Ä' ‚Äî –∫–æ–º–µ–¥–∏—è (1836), '–í–µ—á–µ—Ä–∞ –Ω–∞ —Ö—É—Ç–æ—Ä–µ'.",
                    "–ü–∏—Å–∞–ª '–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏' –º–Ω–æ–≥–æ –ª–µ—Ç. –°–∂—ë–≥ –≤—Ç–æ—Ä–æ–π —Ç–æ–º. –ï—â—ë '–®–∏–Ω–µ–ª—å', '–ù–æ—Å', '–¢–∞—Ä–∞—Å –ë—É–ª—å–±–∞'."
                ]
            else:
                responses = [
                    "–°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –ø—Ä–æ –ù–µ–∂–∏–Ω—Å–∫—É—é –≥–∏–º–Ω–∞–∑–∏—é, '–ú—ë—Ä—Ç–≤—ã–µ –¥—É—à–∏', '–†–µ–≤–∏–∑–æ—Ä–∞', –∂–∏–∑–Ω—å –≤ –†–∏–º–µ.",
                    "–ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Å–∞—Ç–∏—Ä–∞, –∏–ª–∏ —Ç—Ä–∞–≥–∏—á–µ—Å–∫–∞—è —Å—É–¥—å–±–∞?"
                ]
        
        # –ß–ï–•–û–í
        elif author_key == "chekhov":
            if is_about_education:
                responses = [
                    "–£—á–∏–ª—Å—è –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ —Å 1879 –ø–æ 1884 –≥–æ–¥. –ü–æ–ª—É—á–∏–ª –¥–∏–ø–ª–æ–º –≤—Ä–∞—á–∞.",
                    "–í—Ä–∞—á –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é. –û–∫–æ–Ω—á–∏–ª –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç –≤ 1884 –≥–æ–¥—É."
                ]
            elif is_about_life:
                if "—è–ª—Ç–∞" in user_msg_lower:
                    responses = [
                        "–ü–µ—Ä–µ–µ—Ö–∞–ª –≤ –Ø–ª—Ç—É –≤ 1898 –≥–æ–¥—É –∏–∑-–∑–∞ —Ç—É–±–µ—Ä–∫—É–ª—ë–∑–∞. –¢–∞–º –ø–æ—Å—Ç—Ä–æ–∏–ª –¥–æ–º, –ø—Ä–∏–Ω–∏–º–∞–ª –≥–æ—Å—Ç–µ–π.",
                        "–Ø–ª—Ç–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥–æ–¥—ã –∂–∏–∑–Ω–∏. –¢–∞–º –ª–µ—á–∏–ª—Å—è –æ—Ç —á–∞—Ö–æ—Ç–∫–∏, –ø–∏—Å–∞–ª, –ø—Ä–∏–Ω–∏–º–∞–ª –ø–∏—Å–∞—Ç–µ–ª–µ–π."
                    ]
                elif "—Å–∞—Ö–∞–ª–∏–Ω" in user_msg_lower:
                    responses = [
                        "–í 1890 –≥–æ–¥—É —Å–æ–≤–µ—Ä—à–∏–ª –ø–æ–µ–∑–¥–∫—É –Ω–∞ –°–∞—Ö–∞–ª–∏–Ω. –ò–∑—É—á–∞–ª –∂–∏–∑–Ω—å –∫–∞—Ç–æ—Ä–∂–Ω–∏–∫–æ–≤, –Ω–∞–ø–∏—Å–∞–ª –∫–Ω–∏–≥—É.",
                        "–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –ø–æ–µ–∑–¥–∫–∞ ‚Äî –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ. –¢—Ä–∏ –º–µ—Å—è—Ü–∞ –∏–∑—É—á–∞–ª –∫–∞—Ç–æ—Ä–≥—É, –ø–æ—Ç–æ–º –ø–∏—Å–∞–ª –æ—á–µ—Ä–∫."
                    ]
                elif "–≥–¥–µ –∂–∏–ª" in user_msg_lower:
                    responses = [
                        "–†–æ–¥–∏–ª—Å—è –≤ –¢–∞–≥–∞–Ω—Ä–æ–≥–µ, –∂–∏–ª –≤ –ú–æ—Å–∫–≤–µ, —Ä–∞–±–æ—Ç–∞–ª –∑–µ–º—Å–∫–∏–º –≤—Ä–∞—á–æ–º, –ª–µ—á–∏–ª—Å—è –≤ –Ø–ª—Ç–µ.",
                        "–¢–∞–≥–∞–Ω—Ä–æ–≥ ‚Äî –¥–µ—Ç—Å—Ç–≤–æ, –ú–æ—Å–∫–≤–∞ ‚Äî —É—á—ë–±–∞ –∏ –Ω–∞—á–∞–ª–æ, –ü–æ–¥–º–æ—Å–∫–æ–≤—å–µ ‚Äî –≤—Ä–∞—á, –Ø–ª—Ç–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥–æ–¥—ã."
                    ]
                else:
                    responses = [
                        "44 –≥–æ–¥–∞ –∂–∏–∑–Ω–∏: –¥–µ—Ç—Å—Ç–≤–æ –≤ –¢–∞–≥–∞–Ω—Ä–æ–≥–µ, –º–µ–¥–∏—Ü–∏–Ω–∞ –≤ –ú–æ—Å–∫–≤–µ, –∑–µ–º—Å–∫–∏–π –≤—Ä–∞—á, –ø–∏—Å–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –Ø–ª—Ç–∞, —á–∞—Ö–æ—Ç–∫–∞.",
                        "–ö–æ—Ä–æ—Ç–∫–∞—è, –Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω–∞—è –∂–∏–∑–Ω—å: –≤—Ä–∞—á, –ø–∏—Å–∞—Ç–µ–ª—å, –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å —à–∫–æ–ª."
                    ]
            elif is_about_books:
                responses = [
                    "'–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥' (1904), '–¢—Ä–∏ —Å–µ—Å—Ç—Ä—ã' (1901), '–ß–∞–π–∫–∞' (1896), '–ü–∞–ª–∞—Ç–∞ ‚Ññ6', '–î–∞–º–∞ —Å —Å–æ–±–∞—á–∫–æ–π'.",
                    "–ü—å–µ—Å—ã: '–ß–∞–π–∫–∞', '–î—è–¥—è –í–∞–Ω—è', '–¢—Ä–∏ —Å–µ—Å—Ç—Ä—ã', '–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥'. –†–∞—Å—Å–∫–∞–∑—ã: –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ, –±—ã—Ç–æ–≤—ã–µ."
                ]
            elif is_about_family:
                responses = [
                    "–ù–µ –±—ã–ª –∂–µ–Ω–∞—Ç. –ë–ª–∏–∑–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –∞–∫—Ç—Ä–∏—Å–æ–π –û–ª—å–≥–æ–π –ö–Ω–∏–ø–ø–µ—Ä (—Å 1901 –≥–æ–¥–∞).",
                    "–° –û–ª—å–≥–æ–π –ö–Ω–∏–ø–ø–µ—Ä, –∞–∫—Ç—Ä–∏—Å–æ–π –ú–•–¢, –±—ã–ª–∏ –≤–º–µ—Å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥–æ–¥—ã. –û–Ω–∞ –∏–≥—Ä–∞–ª–∞ –≤ –º–æ–∏—Ö –ø—å–µ—Å–∞—Ö."
                ]
            else:
                responses = [
                    "–°–ø—Ä–æ—Å–∏—Ç–µ –ø—Ä–æ –º–µ–¥–∏—Ü–∏–Ω—É, '–í–∏—à–Ω—ë–≤—ã–π —Å–∞–¥', –ø–æ–µ–∑–¥–∫—É –Ω–∞ –°–∞—Ö–∞–ª–∏–Ω, –∂–∏–∑–Ω—å –≤ –Ø–ª—Ç–µ.",
                    "–ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –≤—Ä–∞—á –∏–ª–∏ –ø–∏—Å–∞—Ç–µ–ª—å? –ë–∏–æ–≥—Ä–∞—Ñ–∏—è –∏–ª–∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ?"
                ]
        
        # –û–ë–©–ò–ô –†–ï–ñ–ò–ú
        else:
            responses = [
                "–ó–∞–¥–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ –º–æ–µ–π –∂–∏–∑–Ω–∏, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è—Ö.",
                "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å? –ë—É–¥—å—Ç–µ –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –≤ –≤–æ–ø—Ä–æ—Å–µ."
            ]
        
        return random.choice(responses)

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ main.py)
gigachat_client = None
